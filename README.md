# Google Cloudfunction2

## Providers

| Name                                                          | Version |
|---------------------------------------------------------------|---------|
| <a name="provider_google"></a> [google](#provider\_google)    | n/a     |

## Example

```tf
module "cloudfunction" {
  source      = "https://github.com/fabien-renaud/google-cloudfunction2"
  name        = "hello-world"
  project     = "hello-world"
  location    = "europe-west1"
  description = "Hello world deployed as a Cloudfunction2"
  account_id  = "hello-world"
  entrypoint  = "helloWorld"
  source_dir  = "../dist"
  output_path = "../dist"
}
```

## Resources

| Name                                                                                                                                                            | Type        |
|-----------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------|
| [google_cloud_run_service_iam_member.main](https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/cloud_run_service_iam_member)         | resource    |
| [google_cloudfunctions2_function.main](https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/cloudfunctions2_function)                 | resource    |
| [google_secret_manager_secret.main](https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/secret_manager_secret)                       | resource    |
| [google_secret_manager_secret_iam_member.main](https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/secret_manager_secret_iam_member) | resource    |
| [google_secret_manager_secret_version.main](https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/secret_manager_secret_version)       | resource    |
| [google_service_account.main](https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/service_account)                                   | resource    |
| [google_storage_bucket.main](https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/storage_bucket)                                     | resource    |
| [google_storage_bucket_object.main](https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/storage_bucket_object)                       | resource    |
| [archive_file.main](https://registry.terraform.io/providers/hashicorp/archive/latest/docs/data-sources/file)                                                    | data source |

## Inputs

| Name                                                                                                                       | Description                                                                                                                                                                                                                                                                                                                                                                  | Type           | Default      | Required |
|----------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------|--------------|:--------:|
| <a name="input_account_id"></a> [account\_id](#input\_account\_id)                                                         | (Required) The account id that is used to generate the service account email address and a stable unique id. It is unique within a project, must be 6-30 characters long, and match the regular expression [a-z]([-a-z0-9]*[a-z0-9]) to comply with RFC1035                                                                                                                  | `string`       | n/a          |   yes    |
| <a name="input_available_memory"></a> [available\_memory](#input\_available\_memory)                                       | (Optional) The amount of memory available for a function. Defaults to 256M. Supported units are k, M, G, Mi, Gi. If no unit is supplied the value is interpreted as bytes.                                                                                                                                                                                                   | `string`       | `"512M"`     |    no    |
| <a name="input_description"></a> [description](#input\_description)                                                        | (Optional) User-provided description of a function.                                                                                                                                                                                                                                                                                                                          | `string`       | `""`         |    no    |
| <a name="input_entrypoint"></a> [entrypoint](#input\_entrypoint)                                                           | (Optional) The name of the function (as defined in source code) that will be executed. Defaults to the resource name suffix, if not specified. For backward compatibility, if function with given name is not found, then the system will try to use function named "function". For Node.js this is name of a function exported by the module specified in source\_location. | `string`       | n/a          |   yes    |
| <a name="input_environment_variables"></a> [environment\_variables](#input\_environment\_variables)                        | (Optional) Environment variables that shall be available during function execution.                                                                                                                                                                                                                                                                                          | `map(string)`  | `{}`         |    no    |
| <a name="input_excludes"></a> [excludes](#input\_excludes)                                                                 | (Optional) Specify files to ignore when reading the source\_dir.                                                                                                                                                                                                                                                                                                             | `list(string)` | `[]`         |    no    |
| <a name="input_is_public"></a> [is\_public](#input\_is\_public)                                                            | (Optional) Should allow unauthenticated access                                                                                                                                                                                                                                                                                                                               | `bool`         | `true`       |    no    |
| <a name="input_location"></a> [location](#input\_location)                                                                 | (Required) The location of this cloud function.                                                                                                                                                                                                                                                                                                                              | `string`       | n/a          |   yes    |
| <a name="input_max_instance_count"></a> [max\_instance\_count](#input\_max\_instance\_count)                               | (Optional) The limit on the maximum number of function instances that may coexist at a given time.                                                                                                                                                                                                                                                                           | `number`       | `3000`       |    no    |
| <a name="input_min_instance_count"></a> [min\_instance\_count](#input\_min\_instance\_count)                               | (Optional) The limit on the minimum number of function instances that may coexist at a given time.                                                                                                                                                                                                                                                                           | `number`       | `0`          |    no    |
| <a name="input_name"></a> [name](#input\_name)                                                                             | (Required) A user-defined name of the function. Function names must be unique globally and match pattern projects/*/locations/*/functions/*.                                                                                                                                                                                                                                 | `string`       | n/a          |   yes    |
| <a name="input_output_path"></a> [output\_path](#input\_output\_path)                                                      | (Required) The output of the archive file.                                                                                                                                                                                                                                                                                                                                   | `string`       | n/a          |   yes    |
| <a name="input_project"></a> [project](#input\_project)                                                                    | (Required) The ID of the project in which the resource belongs.                                                                                                                                                                                                                                                                                                              | `string`       | n/a          |   yes    |
| <a name="input_runtime"></a> [runtime](#input\_runtime)                                                                    | (Optional) The runtime in which to run the function. Required when deploying a new function, optional when updating an existing function.                                                                                                                                                                                                                                    | `string`       | `"nodejs16"` |    no    |
| <a name="input_secret_environment_variables"></a> [secret\_environment\_variables](#input\_secret\_environment\_variables) | (Optional) Secret environment variables that shall be available during function execution.                                                                                                                                                                                                                                                                                   | `map(string)`  | `{}`         |    no    |
| <a name="input_source_dir"></a> [source\_dir](#input\_source\_dir)                                                         | (Required) Package entire contents of this directory into the archive.                                                                                                                                                                                                                                                                                                       | `string`       | n/a          |   yes    |
| <a name="input_timeout_seconds"></a> [timeout\_seconds](#input\_timeout\_seconds)                                          | (Optional) The function execution timeout. Execution is considered failed and can be terminated if the function is not completed at the end of the timeout period.                                                                                                                                                                                                           | `number`       | `540`        |    no    |

## Outputs

| Name                                                                                                    | Description                                                                                                                       |
|---------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------|
| <a name="output_name"></a> [name](#output\_name)                                                        | A user-defined name of the function. Function names must be unique globally and match pattern projects/*/locations/*/functions/*. |
| <a name="output_service_account_email"></a> [service\_account\_email](#output\_service\_account\_email) | The email of the service account for this function.                                                                               |
| <a name="output_uri"></a> [uri](#output\_uri)                                                           | URI of the Service deployed.                                                                                                      |
